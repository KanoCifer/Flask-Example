{% extends 'base.html' %} {% block title %}Home{% endblock %} {% block content
%} {% if current_user.is_authenticated %}
<div class="mb-6 rounded-xl bg-gray-50 p-6 shadow-xl dark:bg-gray-800">
  <h2 class="mb-4 text-2xl font-bold">Add a New Book</h2>
  <form method="post">
    {{ form.hidden_tag() }}
    <div class="form-group">
      {{ form.title.label(class="block text-sm font-medium text-gray-700
      dark:text-gray-300 mb-3") }} {{ form.title(class="form-control",
      autocomplete="off", placeholder=form.title.description) }} {% for error in
      form.title.errors %}
      <span class="error-message">{{ error }}</span>
      {% endfor %}
    </div>
    <div class="form-group">
      {{ form.author.label(class="block text-sm font-medium text-gray-700
      dark:text-gray-300 mb-3") }} {{ form.author(class="form-control",
      autocomplete="off", placeholder=form.author.description) }} {% for error
      in form.author.errors %}
      <span class="error-message">{{ error }}</span>
      {% endfor %}
    </div>
    {{ form.submit(class="btn-primary px-6 py-2 rounded-xl text-white
    font-semibold shadow-md", value="Add") }}
  </form>
</div>
{% endif %}
<div
  class="my-4 flex items-center justify-between border-b pb-2 dark:border-gray-700"
>
  <h2
    class="rounded-2xl border-2 border-blue-200 bg-blue-50 px-4 py-2 text-2xl font-bold text-gray-800 dark:text-gray-100"
  >
    {{ books|length }} Books
  </h2>
</div>

<div
  class="overflow-hidden rounded-xl bg-white shadow-lg ring-1 ring-black/5 dark:bg-gray-800 dark:ring-white/10"
>
  <ul class="divide-y divide-gray-100 dark:divide-gray-700">
    {% for book in books %}
    <li
      class="group flex items-center justify-between p-4 transition-colors duration-200 hover:bg-gray-50 dark:hover:bg-gray-700/50"
    >
      <div class="min-w-0 flex-1 pr-4">
        <p
          class="text-md truncate font-medium text-gray-900 dark:text-gray-100"
          title="{{ book['title'] }}"
        >
          üìñ „Ää{{ book['title'] }}„Äã
        </p>
      </div>

      <div class="flex shrink-0 items-center gap-4">
        <div
          class="flex items-center gap-2 opacity-100 transition-opacity sm:opacity-0 sm:group-hover:opacity-100"
        >
          {% if current_user.is_authenticated %}
          <a
            class="btn rounded-xl px-3 py-1 text-sm font-semibold text-white shadow-md transition-transform hover:scale-105"
            href="{{ url_for('main.edit', book_id=book.id) }}"
            >Edit</a
          >
          <form
            class="inline-flex"
            method="post"
            action="{{ url_for('main.delete', book_id=book.id) }}"
          >
            <input
              class="btn cursor-pointer rounded-xl px-3 py-1 text-sm font-semibold text-white shadow-md transition-transform hover:scale-105"
              type="submit"
              name="delete"
              value="Delete"
              onclick="return confirm('Are you sure?');"
            />
          </form>
          {% endif %}
          <a
            class="douban rounded-xl px-3 py-1 text-sm font-semibold text-white shadow-md transition-transform hover:scale-105"
            href="https://book.douban.com/subject_search?search_text={{ book['title'] }}"
            target="_blank"
            title="Find this book on douban"
            >Ë±ÜÁì£</a
          >
        </div>
        <span
          class="hidden text-sm font-medium text-gray-500 sm:block dark:text-gray-400"
        >
          üñãÔ∏è {{ book['author'] }}
        </span>
      </div>
    </li>
    {% endfor %}
  </ul>
</div>
<img
  class="cat"
  alt="Cute Cat"
  src="{{ url_for('static', filename='images/cat.gif') }}"
/>
{% endblock %}
