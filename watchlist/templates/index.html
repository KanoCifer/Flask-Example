{% extends 'base.html' %} {% block title %}Home{% endblock %} {% block content
%} {% if current_user.is_authenticated %}
<div class="mb-6 rounded-xl shadow-xl p-6 bg-gray-50 dark:bg-gray-800">
  <h2 class="text-2xl font-bold mb-4">Add a New Book</h2>
  <form method="post">
    {{ form.hidden_tag() }}
    <div class="form-group">
      {{ form.title.label }} {{ form.title(class="form-control",
      autocomplete="off", placeholder=form.title.description) }} {% for error in
      form.title.errors %}
      <span class="error-message">{{ error }}</span>
      {% endfor %}
    </div>
    <div class="form-group">
      {{ form.author.label }} {{ form.author(class="form-control",
      autocomplete="off", placeholder=form.author.description) }} {% for error
      in form.author.errors %}
      <span class="error-message">{{ error }}</span>
      {% endfor %}
    </div>
    {{ form.submit(class="btn-primary px-6 py-2 rounded-xl font-semibold
    transition-colors duration-200 shadow-lg", value="Add") }}
  </form>
</div>
{% endif %}
<div class="flex w-auto">
  <h2 class="book-count text-3xl font-bold text-center">
    {{ books|length }} Books
  </h2>
</div>
<div>
  <ul class="book-list">
    {% for book in books %}
    <li>
      《{{ book['title'] }}》
      <span class="float-right">
        {{ book['author'] }} {% if current_user.is_authenticated %}
        <a class="btn" href="{{ url_for('main.edit', book_id=book.id) }}"
          >Edit</a
        >
        <form
          class="inline-form"
          method="post"
          action="{{ url_for('main.delete', book_id=book.id) }}"
        >
          <input
            class="btn"
            type="submit"
            name="delete"
            value="Delete"
            onclick="return confirm('Are you sure?');"
          />
        </form>
        {% endif %}
        <a
          class="douban"
          href="https://book.douban.com/subject_search?search_text={{ book['title'] }}"
          target="_blank"
          title="Find this book on douban"
          >豆瓣</a
        >
      </span>
    </li>
    {% endfor %}
  </ul>
</div>
<img
  class="cat"
  alt="Cute Cat"
  src="{{ url_for('static', filename='images/cat.gif') }}"
/>
{% endblock %}
